/* Here is the 'CHALKING-UP' of the online program file. */

echo '<!DOCTYPE html>' > HW_project_online.html;
echo '<head>' >> HW_project_online.html;
echo '<meta charset="UTF-8">' >> HW_project_online.html;
echo '<style>' >> HW_project_online.html;
echo '/* html, body           { cursor: none;                                          } */' >> HW_project_online.html;
echo 'html, body              { overflow: scroll; scrollbar-width: none;               }' >> HW_project_online.html;
echo 'body                    {                         width: 98%; height: 98%;       }' >> HW_project_online.html;
echo 'p                       { margin: 0;                                             }' >> HW_project_online.html;
echo 'body::-webkit-scrollbar { display: none;                                         }' >> HW_project_online.html;
echo '</style>' >> HW_project_online.html;
echo '<link rel="stylesheet" href="e_stylesheets/style.css"/>' >> HW_project_online.html;
echo '<title id="documentTitle">emptyFile</title>' >> HW_project_online.html;
echo '</head>' >> HW_project_online.html;
echo '<body>' >> HW_project_online.html;

echo '<div id="utilityLayer0" ></div>' >> HW_project_online.html;
echo '<div id="utilityLayer1" ></div>' >> HW_project_online.html;
echo '<div id="interfaceLayer"></div>' >> HW_project_online.html;
echo '<div id="gridLayer"     ></div>' >> HW_project_online.html;
echo '<div id="mouseIconLayer"></div>' >> HW_project_online.html;

echo '<div id="scripts">' >> HW_project_online.html;
echo 'const' > ./hw/z_hwObject/a_hwObject.js;
echo 'hw = {};' >> ./hw/z_hwObject/a_hwObject.js;
find hw/a_programFunctions/ | sed "s/$/ = {};/g" | sed "s/\.js = {};//g" | tr '/' '.' | sed "s/\. / /g" > pasteFirst;
find hw/a_programFunctions/ | sed "s/^.*_/ = /g" | sed "s/\.js/;/g" > pasteLast;
paste pasteFirst pasteLast | sed "s/;.*$/;/g" >> ./hw/z_hwObject/a_hwObject.js;
rm pasteFirst pasteLast;

sed -i "s/\.\././g" ./hw/z_hwObject/a_hwObject.js;
sed -i '/js\.swp/d' ./hw/z_hwObject/a_hwObject.js;

find hw -type f | sed '/js\.swp/d' | sed 's/^/<script src=".\//g' | sed 's/$/"><\/script>/g' >> HW_project_online.html;
echo '<script src="./hw/c_handlers/c_initialization/c_insertNewWindow.js"></script>' >> HW_project_online.html;

echo '</div>' >> HW_project_online.html;
echo '</body>' >> HW_project_online.html;
echo '</html>' >> HW_project_online.html;




/* When we use insertWindow, we are actually writing the HW_project_online.html file again to that new window. */

echo 'function insertNewWindow(keyInfo,refresh) {' > c_insertNewWindow.js;
echo 'const' >> c_insertNewWindow.js;
echo 'e      = keyInfo[0],' >> c_insertNewWindow.js;
echo 'kC     = keyInfo[1],' >> c_insertNewWindow.js;
echo 'cC     = keyInfo[2],' >> c_insertNewWindow.js;
echo 'shift  = keyInfo[3],' >> c_insertNewWindow.js;
echo 'ctrl   = keyInfo[4],' >> c_insertNewWindow.js;
echo 'alt    = keyInfo[5];' >> c_insertNewWindow.js;
echo 'const wH = window.innerHeight;' >> c_insertNewWindow.js;
echo 'const wW = window.innerwidth;' >> c_insertNewWindow.js;
echo 'const fileContentsReference =' >> c_insertNewWindow.js;
echo -n "\`" >> c_insertNewWindow.js;
cat HW_project_online.html >> c_insertNewWindow.js;
echo -n "\`;" >> c_insertNewWindow.js;
echo 'let iS = 192;' >> c_insertNewWindow.js;
echo '/*    I    */ if (kC ==  73 && cC ==  73) { window.children[window.children.length] = window.open("","_blank",`height=${window.innerHeight + 1},width=${iS + 1},top=${window.screenTop},left=${window.screenLeft - iS},resizable=yes,noopener=no`); }' >> c_insertNewWindow.js;
echo '/*    O    */ if (kC ==  79 && cC ==  79) { window.children[window.children.length] = window.open("","_blank",`height=${iS + 1},width=${window.innerWidth + 1},top=${window.screenTop + window.innerHeight},left=${window.screenLeft},resizable=yes,noopener=no`); }' >> c_insertNewWindow.js;
echo '/*    A    */ if (kC ==  65 && cC ==  65) { window.children[window.children.length] = window.open("","_blank",`height=${window.innerHeight + 1},width=${iS + 1},top=${window.screenTop},left=${window.screenLeft + window.innerWidth},resizable=yes,noopener=no`); }' >> c_insertNewWindow.js;
echo '/*    i    */ if (kC ==  73 && cC == 105) { window.children[window.children.length] = window.open("","_blank",`height=${window.innerHeight + 1},width=${iS + 1},top=${window.screenTop},left=0,resizable=yes,noopener=no`); }' >> c_insertNewWindow.js;
echo '/*    o    */ if (kC ==  79 && cC == 111) { window.children[window.children.length] = window.open("","_blank",`height=${iS + 1},width=${window.innerWidth + 1},top=${window.screenTop - iS},left=${window.screenLeft},resizable=yes,noopener=no`); }' >> c_insertNewWindow.js;
echo '/*    a    */ if (kC ==  65 && cC ==  97) { window.children[window.children.length] = window.open("","_blank",`height=${window.innerHeight + 1},width=${iS + 1},top=${window.screenTop},left=${screen.width - iS},resizable=yes,noopener=no`); }' >> c_insertNewWindow.js;
echo '/*    n    */ if (kC ==  78 && cC == 110) { window.children[window.children.length] = window.open("","_blank"); }' >> c_insertNewWindow.js;
echo '/* REFRESH */ if (refresh==true)          { window.children[window.children.length] = window.open("","_blank",`height=${window.innerHeight},width=${window.innerWidth},top=${window.screenTop},left=${window.screenLeft},resizable=yes,noopener=no`); window.close(); }' >> c_insertNewWindow.js;

echo 'window.children[window.children.length - 1].document.write(fileContentsReference);' >> c_insertNewWindow.js;
echo 'try {' >> c_insertNewWindow.js;
echo 'for (let j = 0; j < window.parents.length; j++) {' >> c_insertNewWindow.js;
echo 'window.parents[j].children[window.parents[j].children.length] = window.children[window.children.length - 1];' >> c_insertNewWindow.js;
echo '}' >> c_insertNewWindow.js;
echo '} catch {}' >> c_insertNewWindow.js;
echo '}' >> c_insertNewWindow.js;

mv c_insertNewWindow.js ./hw/c_handlers/c_initialization/;




/* Here is a nifty tree representation, self-contained, searchable in the browser, with clickable links. */

echo '<!DOCTYPE html>' > HW_treeDiagram.html;
echo "<body>" >> HW_treeDiagram.html;
echo '<pre style="font-size: 24px; font-style: italic; color: rgb(64,64,64);">' >> HW_treeDiagram.html;
echo '<span style="font-size: 48px; color: #DEFF1C;">HW TREE DIAGRAM</span>' >> HW_treeDiagram.html;
find hw/ | sed 's/\(^.*\/\)\(.*$\)/\1<a style="color: #DEFF1C; font-style: normal; font-weight: bold;" href="\1\2">\2<\/a>/g' | sed '/\.js/!i <a>' >> HW_treeDiagram.html;
echo "</pre>" >> HW_treeDiagram.html;
echo "<script>" >> HW_treeDiagram.html;
echo "document.body.style.backgroundColor = 'black';" >> HW_treeDiagram.html;
echo "</script>" >> HW_treeDiagram.html;
echo "</body>" >> HW_treeDiagram.html;
echo "</html>" >> HW_treeDiagram.html;




/* This is a handy header and footer pair that will allow in-programs tutorials or start-up files to be made easily. */

head -n -3 HW_project_online.html > WEBSITE/b_htmlClipSets/b_0_topClip;
echo "<script>" >> WEBSITE/b_htmlClipSets/b_0_topClip;
echo "utilityLayer0.innerHTML = " >> WEBSITE/b_htmlClipSets/b_0_topClip;
echo '`' >> WEBSITE/b_htmlClipSets/b_0_topClip;




/* Also make up a piece of data for an in-program button that will save start-up files. */


echo 'hw.c_startup = {};' > hw/z_hwObject/c_startup.js;

echo 'hw.c_startup.a_note = "This data allow entry for your own startup file metadata in c_customMetaData";' >> hw/z_hwObject/c_startup.js;


echo 'hw.c_startup.b_first = `' >> hw/z_hwObject/c_startup.js;
head -3 HW_project_online.html >> hw/z_hwObject/c_startup.js;
echo '`;' >> hw/z_hwObject/c_startup.js;

echo >> hw/z_hwObject/c_startup.js;

echo 'hw.c_startup.c_customMetaDataHere = ``;' >> hw/z_hwObject/c_startup.js;

echo >> hw/z_hwObject/c_startup.js;

echo 'hw.c_startup.d_second = `' >> hw/z_hwObject/c_startup.js;
head -n -3 HW_project_online.html | tail -n +4 >> hw/z_hwObject/c_startup.js;
echo "<script>" >> hw/z_hwObject/c_startup.js;
echo 'utilityLayer0.innerHTML = \`' >> hw/z_hwObject/c_startup.js;
echo '`;' >> hw/z_hwObject/c_startup.js;

echo >> hw/z_hwObject/c_startup.js;

echo 'hw.c_startup.e_third = `' >> hw/z_hwObject/c_startup.js;
echo '\`;' >> hw/z_hwObject/c_startup.js;
cat WEBSITE/b_htmlClipSets/b_1_bottomClip | tail -n +2 >> hw/z_hwObject/c_startup.js;
echo '`;' >> hw/z_hwObject/c_startup.js;




/* Here we are setting the permissions completely, which will help when it comes to compressing the file. */

find . -type f -exec chmod 644 {} +;
find . -type d -exec chmod 755 {} +;
echo "... all done! HW_project_online.html, c_insertNewWindow.js, and HW_treeDiagram.html are revised and all permissions are set ...";
